(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{25:function(e,t,a){e.exports=a(64)},32:function(e,t,a){},34:function(e,t,a){},36:function(e,t,a){},42:function(e,t,a){},58:function(e,t,a){},60:function(e,t,a){},62:function(e,t,a){},64:function(e,t,a){"use strict";a.r(t);var n=a(0),s=a.n(n),r=a(21),o=a.n(r),c=(a(30),a(32),a(3)),i=a(4),u=a(6),l=a(5),m=a(7),p=(a(34),function(e){var t=e.children,a=e.onLogOut;return s.a.createElement("header",{className:"Header"},s.a.createElement("p",{className:"Header-userName"},t),s.a.createElement("div",{className:"Header-button",onClick:a},s.a.createElement("div",{className:"Header-button_text"},"\u0412\u044b\u0439\u0442\u0438"),s.a.createElement("i",{className:"fas fa-sign-out-alt"})))}),g=(a(36),function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,s=new Array(n),r=0;r<n;r++)s[r]=arguments[r];return(a=Object(u.a)(this,(e=Object(l.a)(t)).call.apply(e,[this].concat(s)))).state={login:""},a.setInput=function(e){a.setState({login:e.target.value})},a.handleLogIn=function(){a.props.onLogIn(a.state.login),a.setState({login:""})},a}return Object(m.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return this.props.isOpened?s.a.createElement("div",{className:"AuthDialog"},s.a.createElement("div",{className:"AuthDialog-form"},s.a.createElement("h2",null,"\u0427\u0430\u0442\u0438\u043a"),s.a.createElement("input",{className:"AuthDialog-input",placeholder:"\u041b\u043e\u0433\u0438\u043d",value:this.state.login,onChange:this.setInput}),s.a.createElement("button",{onClick:this.handleLogIn,className:"AuthDialog-button"},"\u0412\u043e\u0439\u0442\u0438"))):null}}]),t}(s.a.Component)),h=a(10),d=(a(42),function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,s=new Array(n),r=0;r<n;r++)s[r]=arguments[r];return(a=Object(u.a)(this,(e=Object(l.a)(t)).call.apply(e,[this].concat(s)))).state={input:""},a.onInputChange=function(e){a.setState({input:e.target.value})},a.sendMessage=function(){a.state.input&&(a.props.onSend(a.state.input),a.setState({input:""}))},a.keyListener=function(e){13===e.keyCode&&e.ctrlKey&&a.sendMessage()},a}return Object(m.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return s.a.createElement("footer",{className:"Footer","data-grid":"va-stretch"},s.a.createElement("div",{className:"Footer-textarea-container"},s.a.createElement("textarea",{className:"Footer-textarea",placeholder:"Ctrl+Enter \u0434\u043b\u044f \u043e\u0442\u043f\u0440\u0430\u0432\u043a\u0438",onKeyDown:this.keyListener,onChange:this.onInputChange,value:this.state.input})),s.a.createElement("div",{className:"Footer-gap"}),s.a.createElement("div",{className:"Footer-button",onClick:this.sendMessage},s.a.createElement("i",{className:"Footer-button-icon far fa-paper-plane"})))}}]),t}(s.a.Component)),f="SEND_MESSAGE",v="LOG_OUT",b="LOG_IN",O="UPDATE_MESSAGE_POOL";var N=a(16),E=a.n(N);E.a.initializeApp({apiKey:"AIzaSyAqiGbBbiz9l0XKIQeTw1qlVonK8rmS3hU",authDomain:"altarixchat.firebaseapp.com",databaseURL:"https://altarixchat.firebaseio.com",projectId:"altarixchat",storageBucket:"altarixchat.appspot.com",messagingSenderId:"707928431356"});var j=E.a.database(),y=function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,s=new Array(n),r=0;r<n;r++)s[r]=arguments[r];return(a=Object(u.a)(this,(e=Object(l.a)(t)).call.apply(e,[this].concat(s)))).sendMessage=function(e){var t=Date.now(),n={id:t,text:e,name:a.props.userName};j.ref("/messages/".concat(t)).set(n)},a}return Object(m.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return s.a.createElement(d,{messages:this.props.messages,onSend:this.sendMessage})}}]),t}(s.a.Component),C=Object(h.b)(null,function(e){return{handleSendMessage:function(t){e(function(e,t){return{type:f,id:e,text:t}}(Date.now(),t))}}})(y),k=(a(58),function(e){var t=e.hide,a=e.children;return t?null:a}),M=a(17),S=a.n(M),x=function(e){var t=e.message,a=e.isOutgoing;return s.a.createElement("div",{className:S()("ChatMessage",{"justify-right":a})},s.a.createElement("div",{className:S()("ChatMessage-message-avatar",{"order-2":a})},s.a.createElement("i",{className:"ChatMessage-message-avatar__icon fas fa-user-circle"}),s.a.createElement(k,{hide:a},s.a.createElement("div",{className:"ChatMessage-message-avatar__username"},t.name))),s.a.createElement("div",{className:"ChatMessage-message-text"},t.text))},I=(a(60),function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(u.a)(this,(e=Object(l.a)(t)).call.apply(e,[this].concat(r)))).renderMessages=function(){return a.props.messages.map(function(e){return s.a.createElement(x,{isOutgoing:a.props.userName===e.name,message:e,key:e.id})})},a}return Object(m.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){this.scrollToBottom()}},{key:"componentDidUpdate",value:function(e){e.messages;this.scrollToBottom()}},{key:"scrollToBottom",value:function(){this.container.scrollTop=this.container.scrollHeight}},{key:"render",value:function(){var e=this;return s.a.createElement("div",{className:"ChatSpace"},s.a.createElement("div",{className:"ChatSpace-messages",ref:function(t){e.container=t}},this.renderMessages()))}}]),t}(s.a.Component)),L=(a(62),function(e){function t(){return Object(c.a)(this,t),Object(u.a)(this,Object(l.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){var e=this;this.messagesRef=j.ref("messages"),this.messagesRef.on("value",function(t){e.props.updateMessagePool(Object.values(t.val()))})}},{key:"render",value:function(){return s.a.createElement("div",{className:"App"},s.a.createElement(g,{isOpened:!this.props.userName,onLogIn:this.props.handleLogIn}),s.a.createElement(p,{onLogOut:this.props.handleLogOut},this.props.userName),s.a.createElement(I,{messages:this.props.messages,userName:this.props.userName}),s.a.createElement(C,{userName:this.props.userName}))}}]),t}(n.Component)),w=Object(h.b)(function(e){return{userName:e.userName,messages:e.messages}},function(e){return{handleLogOut:function(){e({type:v})},updateMessagePool:function(t){e(function(e){return{type:O,messages:e}}(t))},handleLogIn:function(t){t&&e(function(e){return{type:b,userName:e}}(t))}}})(L),A=a(11),D=a(24),_=a(12);var T=Object(A.c)(function(e,t){switch(t.type){case f:return Object(_.a)({},e,{messages:Object(D.a)(e.messages).concat([{id:t.id,userName:e.userName,text:t.text,isOutgoing:!0}])});case v:return Object(_.a)({},e,{userName:""});case b:return Object(_.a)({},e,{userName:t.userName});case O:return Object(_.a)({},e,{messages:t.messages});default:return e}},{messages:[],userName:"\u0421\u0435\u043c\u0451\u043d \u0411\u0440\u044f\u0442\u043e\u0432"},Object(A.a)(function(e){return function(t){return function(a){console.log("dispatching",a);var n=t(a);return console.log("next state",e.getState()),n}}}));o.a.render(s.a.createElement(h.a,{store:T},s.a.createElement(w,null)),document.getElementById("root"))}},[[25,2,1]]]);
//# sourceMappingURL=main.705146b7.chunk.js.map