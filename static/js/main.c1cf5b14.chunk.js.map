{"version":3,"sources":["components/Header/Header.js","components/AuthDialog/AuthDialog.js","components/Footer/Footer.js","components/HideMe/HideMe.js","components/ChatMessage/ChatMessage.js","components/ChatSpace/ChatSpace.js","redux/actions.js","firebase.js","components/App/App.js","redux/store.js","redux/reducer.js","index.js"],"names":["Header","_ref","children","onLogOut","react_default","a","createElement","className","onClick","AuthDialog","handleLogIn","userName","_this","props","inputValue","onLogIn","handleInputChange","e","onInputChange","target","value","this","isOpened","placeholder","onChange","React","Component","Footer","keyListener","event","keyCode","ctrlKey","onSend","data-grid","onKeyDown","HideMe","hide","ChatMessage","message","isOutgoing","classNames","justify-right","order-2","HideMe_HideMe","name","text","ChatSpace","renderMessages","messages","filter","msg","Object","values","reduce","acc","el","id","map","components_ChatMessage_ChatMessage","key","scrollToBottom","container","scrollTop","scrollHeight","_this2","ref","INPUT_VALUE_CHANGE","LOG_OUT","LOG_IN","UPDATE_MESSAGE_POOL","firebase","initializeApp","apiKey","authDomain","databaseURL","projectId","storageBucket","messagingSenderId","db","database","App","sendMessage","now","Date","concat","set","messagesRef","on","snapshot","updateMessagePool","val","components_AuthDialog_AuthDialog","components_Header_Header","handleLogOut","components_ChatSpace_ChatSpace","components_Footer_Footer","connect","dispatch","type","logIn","inputValueChange","store","createStore","state","action","objectSpread","applyMiddleware","next","console","log","result","getState","ReactDOM","render","es","components_App_App","document","getElementById"],"mappings":"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","file":"static/js/main.c1cf5b14.chunk.js","sourcesContent":["import React from 'react';\r\nimport './Header.css';\r\n\r\nconst Header = ({children, onLogOut}) => (\r\n    <header className=\"Header\">\r\n        <p className=\"Header-userName\">{children}</p>\r\n        <div className=\"Header-button\" onClick={onLogOut}><div className=\"Header-button_text\">Выйти</div><i className=\"fas fa-sign-out-alt\"></i></div>\r\n    </header>\r\n)\r\n\r\nexport default Header;","import React from 'react';\nimport './AuthDialog.css';\n\nclass AuthDialog extends React.Component {\n\n    handleLogIn = () => {\n        const userName = this.props.inputValue;\n        if (userName !=='') this.props.onLogIn(userName)\n    }\n\n    handleInputChange = (e) => {\n        this.props.onInputChange(e.target.value);\n    }\n\n    render() {\n        return(    \n            this.props.isOpened ? \n                <div className='AuthDialog'>\n                    <div className='AuthDialog-form'>\n                    <h2>Чатик</h2>\n                    <input className='AuthDialog-input' placeholder='Логин' onChange={this.handleInputChange} value={this.props.inputValue}></input>\n                    <button onClick={this.handleLogIn} className='AuthDialog-button'>Войти</button>\n                    </div>\n                </div>\n            : null\n            )\n    }\n    }\n\nexport default AuthDialog","import React from 'react';\r\nimport './Footer.css';\r\n\r\nclass Footer extends React.Component {\r\n\r\n    handleInputChange = (e) => {\r\n        this.props.onInputChange(e.target.value);\r\n    }\r\n\r\n    keyListener = (event) => {\r\n        if (event.keyCode === 13 && event.ctrlKey) this.props.onSend();\r\n    }\r\n\r\n    render() {\r\n        return( \r\n            <footer className=\"Footer\" data-grid=\"va-stretch\">\r\n                <div className=\"Footer-textarea-container\">\r\n                    <textarea className=\"Footer-textarea\" placeholder=\"Ctrl+Enter для отправки\" onKeyDown = {this.keyListener} onChange={this.handleInputChange} value={this.props.inputValue}></textarea>\r\n                </div>\r\n                <div className='Footer-gap'></div>\r\n                <div className=\"Footer-button\" onClick={this.props.onSend}><i className=\"Footer-button-icon far fa-paper-plane\"></i></div>\r\n            </footer>\r\n        )}\r\n}\r\n\r\nexport default Footer;","\r\nconst HideMe = ({hide, children}) => (\r\n    hide ? null : children \r\n)\r\n\r\nexport default HideMe;","import React from 'react';\r\nimport './ChatMessage.css';\r\nimport HideMe from '../HideMe/HideMe';\r\nimport classNames from 'classnames';\r\n\r\nconst ChatMessage = ({message, isOutgoing}) => {\r\n    return (<div className={classNames('ChatMessage',  {'justify-right': isOutgoing})}>\r\n        <div className={classNames(\"ChatMessage-message-avatar\", {'order-2': isOutgoing})}>\r\n            <i className=\"ChatMessage-message-avatar__icon fas fa-user-circle\"></i>\r\n            <HideMe hide={isOutgoing}><div className=\"ChatMessage-message-avatar__username\">{message.name}</div></HideMe>\r\n        </div>\r\n        <div className='ChatMessage-message-text'>{message.text}</div>\r\n    </div>)\r\n}\r\n\r\nexport default ChatMessage;","import React from 'react';\r\nimport ChatMessage from '../ChatMessage/ChatMessage';\r\nimport './ChatSpace.css';\r\n\r\nclass ChatSpace extends React.Component { \r\n\r\n    componentDidMount() {\r\n        this.scrollToBottom();\r\n    }\r\n\r\n    componentDidUpdate() {\r\n        this.scrollToBottom();\r\n    }\r\n\r\n    scrollToBottom() {\r\n        this.container.scrollTop = this.container.scrollHeight;\r\n    }\r\n\r\n    renderMessages = () => {\r\n        const messages = this.props.messages.filter((msg) => {\r\n            const msgHasStrangeShape = Object.values(msg).reduce((acc, el) => typeof el === 'object' ? true : acc, false);\r\n            return !msgHasStrangeShape && msg.id;\r\n        }) \r\n        return messages.map((msg) => <ChatMessage isOutgoing={this.props.userName === msg.name} message={msg} key={msg.id}/>)\r\n    }\r\n\r\n    render() {\r\n        return(\r\n            <div className=\"ChatSpace\">\r\n            <div className=\"ChatSpace-messages\" ref={(container) => {this.container = container}}>{this.renderMessages()}</div>\r\n            </div>\r\n        )}\r\n    }\r\n\r\nexport default ChatSpace;","export const INPUT_VALUE_CHANGE = 'INPUT_VALUE_CHANGE';\r\nexport const LOG_OUT = 'LOG_OUT';\r\nexport const LOG_IN = 'LOG_IN';\r\nexport const UPDATE_MESSAGE_POOL = 'UPDATE_MESSAGE_POOL';\r\n\r\n\r\nexport function inputValueChange(value) {\r\n    return {\r\n        type: INPUT_VALUE_CHANGE,\r\n        value\r\n    }\r\n}\r\n\r\nexport function updateMessagePool(messages) {\r\n    return {\r\n        type: UPDATE_MESSAGE_POOL,\r\n        messages\r\n    }\r\n}\r\n\r\nexport function logIn(userName) {\r\n    return {\r\n        type: LOG_IN,\r\n        userName\r\n    }\r\n}\r\n\r\nexport function logOut() {\r\n    return {\r\n        type: LOG_OUT,\r\n    }\r\n}","import firebase from 'firebase';\r\n\r\nconst config = {\r\n    apiKey: \"AIzaSyAqiGbBbiz9l0XKIQeTw1qlVonK8rmS3hU\",\r\n    authDomain: \"altarixchat.firebaseapp.com\",\r\n    databaseURL: \"https://altarixchat.firebaseio.com\",\r\n    projectId: \"altarixchat\",\r\n    storageBucket: \"altarixchat.appspot.com\",\r\n    messagingSenderId: \"707928431356\",\r\n};\r\n\r\nfirebase.initializeApp(config);\r\n\r\nconst db = firebase.database();\r\n\r\nexport { db };","import React, { Component } from 'react';\nimport Header from '../Header/Header';\nimport AuthDialog from '../AuthDialog/AuthDialog';\nimport Footer from '..//Footer/Footer';\nimport ChatSpace from '../ChatSpace/ChatSpace';\nimport { connect } from 'react-redux';\nimport { logOut, logIn, updateMessagePool, inputValueChange } from '../../redux/actions';\nimport './App.css';\nimport {db} from '../../firebase';\n\nclass App extends Component {\n\n  componentDidMount() {\n    this.messagesRef = db.ref('messages');\n    this.messagesRef.on('value', (snapshot) => {this.props.updateMessagePool(Object.values(snapshot.val()))})\n  }\n\n  onInputChange = (value) => {\n      this.props.handleInputChange(value);\n  }\n\n  sendMessage = () => {\n      let text = this.props.inputValue;\n      if (text !== '') {\n          this.props.handleInputChange('');\n          let now = Date.now();\n          let message = {\n              id: now, \n              text,\n              name: this.props.userName\n          }\n          db.ref(`/messages/${now}`).set(message);\n      }\n  }\n\n  render() {\n    return (\n      <div className=\"App\">\n        <AuthDialog isOpened={!this.props.userName} inputValue={this.props.inputValue} onInputChange={this.onInputChange} onLogIn={this.props.handleLogIn}/>\n        <Header onLogOut={this.props.handleLogOut}>{this.props.userName}</Header>\n        <ChatSpace messages={this.props.messages} userName = {this.props.userName}/>\n        <Footer messages={this.props.messages} onSend={this.sendMessage} onInputChange={this.onInputChange} inputValue={this.props.inputValue} />\n      </div>\n    );\n  }\n}\n\nconst mapStateToProps = ({userName, messages, inputValue}) => ({\n  userName, messages, inputValue\n})\n\nconst mapDispatchToProps = (dispatch) => ({\n  handleLogOut() { dispatch(logOut())},\n  updateMessagePool(messages) {dispatch(updateMessagePool(messages))},\n  handleLogIn(userName) {dispatch(logIn(userName))},\n  handleInputChange(value) {dispatch(inputValueChange(value))}\n})\n\nexport default connect(mapStateToProps, mapDispatchToProps)(App);\n","import { createStore, applyMiddleware } from 'redux';\r\nimport reducer from './reducer';\r\n\r\nconst initialState = {\r\n    messages: [],\r\n    userName: 'Семён Брятов', \r\n    inputValue: ''\r\n}\r\n\r\nconst logger = store => next => action => {\r\n    console.log('dispatching', action)\r\n    let result = next(action)\r\n    console.log('next state', store.getState())\r\n    return result\r\n  }\r\n\r\nconst store = createStore(reducer, initialState, applyMiddleware(logger));\r\n\r\nexport default store;","import {INPUT_VALUE_CHANGE, LOG_OUT, LOG_IN, UPDATE_MESSAGE_POOL} from './actions';\r\n\r\nexport default function reducer(state, action) {\r\n    switch (action.type) {\r\n        case INPUT_VALUE_CHANGE:\r\n            return {...state, inputValue: action.value}\r\n        case LOG_OUT:\r\n            return {...state, userName: ''}\r\n        case LOG_IN:\r\n            return {...state, inputValue: '', userName: action.userName}      \r\n        case UPDATE_MESSAGE_POOL:\r\n            return {...state, messages: action.messages}    \r\n        default:\r\n            return state;\r\n    }\r\n}\r\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport 'normalize.css'\nimport './index.css';\nimport App from './components/App/App';\nimport { Provider } from 'react-redux'\nimport store from './redux/store';\n\nReactDOM.render(<Provider store={store}><App /></Provider>, document.getElementById('root'));\n\n"],"sourceRoot":""}