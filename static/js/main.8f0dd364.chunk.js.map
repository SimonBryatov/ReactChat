{"version":3,"sources":["components/Header/Header.js","components/AuthDialog/AuthDialog.js","components/Footer/Footer.js","components/HideMe/HideMe.js","components/ChatMessage/ChatMessage.js","components/ChatSpace/ChatSpace.js","redux/actions.js","firebase.js","components/App/App.js","redux/store.js","redux/reducer.js","index.js"],"names":["Header","_ref","children","onLogOut","react_default","a","createElement","className","onClick","AuthDialog","handleLogIn","userName","_this","props","inputValue","onLogIn","handleInputChange","e","onInputChange","target","value","this","isOpened","placeholder","onChange","React","Component","Footer","keyListener","event","keyCode","ctrlKey","onSend","data-grid","onKeyDown","HideMe","hide","ChatMessage","message","isOutgoing","classNames","justify-right","order-2","HideMe_HideMe","name","text","ChatSpace","renderMessages","messages","map","msg","components_ChatMessage_ChatMessage","key","id","scrollToBottom","container","scrollTop","scrollHeight","_this2","ref","INPUT_VALUE_CHANGE","LOG_OUT","LOG_IN","UPDATE_MESSAGE_POOL","firebase","initializeApp","apiKey","authDomain","databaseURL","projectId","storageBucket","messagingSenderId","db","database","App","sendMessage","now","Date","concat","set","messagesRef","on","snapshot","updateMessagePool","Object","values","val","components_AuthDialog_AuthDialog","components_Header_Header","handleLogOut","components_ChatSpace_ChatSpace","components_Footer_Footer","connect","dispatch","type","logIn","inputValueChange","store","createStore","state","action","objectSpread","applyMiddleware","next","console","log","result","getState","ReactDOM","render","es","components_App_App","document","getElementById"],"mappings":"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","file":"static/js/main.8f0dd364.chunk.js","sourcesContent":["import React from 'react';\r\nimport './Header.css';\r\n\r\nconst Header = ({children, onLogOut}) => (\r\n    <header className=\"Header\">\r\n        <p className=\"Header-userName\">{children}</p>\r\n        <div className=\"Header-button\" onClick={onLogOut}><div className=\"Header-button_text\">Выйти</div><i className=\"fas fa-sign-out-alt\"></i></div>\r\n    </header>\r\n)\r\n\r\nexport default Header;","import React from 'react';\nimport './AuthDialog.css';\n\nclass AuthDialog extends React.Component {\n\n    handleLogIn = () => {\n        const userName = this.props.inputValue;\n        if (userName !=='') this.props.onLogIn(userName)\n    }\n\n    handleInputChange = (e) => {\n        this.props.onInputChange(e.target.value);\n    }\n\n    render() {\n        return(    \n            this.props.isOpened ? \n                <div className='AuthDialog'>\n                    <div className='AuthDialog-form'>\n                    <h2>Чатик</h2>\n                    <input className='AuthDialog-input' placeholder='Логин' onChange={this.handleInputChange} value={this.props.inputValue}></input>\n                    <button onClick={this.handleLogIn} className='AuthDialog-button'>Войти</button>\n                    </div>\n                </div>\n            : null\n            )\n    }\n    }\n\nexport default AuthDialog","import React from 'react';\r\nimport './Footer.css';\r\n\r\nclass Footer extends React.Component {\r\n\r\n    handleInputChange = (e) => {\r\n        this.props.onInputChange(e.target.value);\r\n    }\r\n\r\n    keyListener = (event) => {\r\n        if (event.keyCode === 13 && event.ctrlKey) this.props.onSend();\r\n    }\r\n\r\n    render() {\r\n        return( \r\n            <footer className=\"Footer\" data-grid=\"va-stretch\">\r\n                <div className=\"Footer-textarea-container\">\r\n                    <textarea className=\"Footer-textarea\" placeholder=\"Ctrl+Enter для отправки\" onKeyDown = {this.keyListener} onChange={this.handleInputChange} value={this.props.inputValue}></textarea>\r\n                </div>\r\n                <div className='Footer-gap'></div>\r\n                <div className=\"Footer-button\" onClick={this.props.onSend}><i className=\"Footer-button-icon far fa-paper-plane\"></i></div>\r\n            </footer>\r\n        )}\r\n}\r\n\r\nexport default Footer;","\r\nconst HideMe = ({hide, children}) => (\r\n    hide ? null : children \r\n)\r\n\r\nexport default HideMe;","import React from 'react';\r\nimport './ChatMessage.css';\r\nimport HideMe from '../HideMe/HideMe';\r\nimport classNames from 'classnames';\r\nconst ChatMessage = ({message, isOutgoing}) => {\r\n    return (<div className={classNames('ChatMessage',  {'justify-right': isOutgoing})}>\r\n        <div className={classNames(\"ChatMessage-message-avatar\", {'order-2': isOutgoing})}>\r\n            <i className=\"ChatMessage-message-avatar__icon fas fa-user-circle\"></i>\r\n            <HideMe hide={isOutgoing}><div className=\"ChatMessage-message-avatar__username\">{message.name}</div></HideMe>\r\n        </div>\r\n        <div className='ChatMessage-message-text'>{message.text}</div>\r\n    </div>)\r\n}\r\n\r\nexport default ChatMessage;","import React from 'react';\r\nimport ChatMessage from '../ChatMessage/ChatMessage';\r\nimport './ChatSpace.css';\r\n\r\nclass ChatSpace extends React.Component { \r\n\r\n    componentDidMount() {\r\n        this.scrollToBottom();\r\n    }\r\n\r\n    componentDidUpdate({messages}) {\r\n        //if (messages[messages.length - 1].isOutgoing) {\r\n        this.scrollToBottom();\r\n        //}\r\n    }\r\n\r\n    scrollToBottom() {\r\n        this.container.scrollTop = this.container.scrollHeight;\r\n    }\r\n\r\n    renderMessages = () => {\r\n        return this.props.messages.map((msg) => <ChatMessage isOutgoing={this.props.userName === msg.name} message={msg} key={msg.id}/>)\r\n    }\r\n\r\n    render() {\r\n        return(\r\n            <div className=\"ChatSpace\">\r\n            <div className=\"ChatSpace-messages\" ref={(container) => {this.container = container}}>{this.renderMessages()}</div>\r\n            </div>\r\n        )}\r\n    }\r\n\r\nexport default ChatSpace;","export const INPUT_VALUE_CHANGE = 'INPUT_VALUE_CHANGE';\r\nexport const LOG_OUT = 'LOG_OUT';\r\nexport const LOG_IN = 'LOG_IN';\r\nexport const UPDATE_MESSAGE_POOL = 'UPDATE_MESSAGE_POOL';\r\n\r\n\r\nexport function inputValueChange(value) {\r\n    return {\r\n        type: INPUT_VALUE_CHANGE,\r\n        value\r\n    }\r\n}\r\n\r\nexport function updateMessagePool(messages) {\r\n    return {\r\n        type: UPDATE_MESSAGE_POOL,\r\n        messages\r\n    }\r\n}\r\n\r\nexport function logIn(userName) {\r\n    return {\r\n        type: LOG_IN,\r\n        userName\r\n    }\r\n}\r\n\r\nexport function logOut() {\r\n    return {\r\n        type: LOG_OUT,\r\n    }\r\n}","import firebase from 'firebase';\r\n\r\nconst config = {\r\n    apiKey: \"AIzaSyAqiGbBbiz9l0XKIQeTw1qlVonK8rmS3hU\",\r\n    authDomain: \"altarixchat.firebaseapp.com\",\r\n    databaseURL: \"https://altarixchat.firebaseio.com\",\r\n    projectId: \"altarixchat\",\r\n    storageBucket: \"altarixchat.appspot.com\",\r\n    messagingSenderId: \"707928431356\",\r\n};\r\n\r\nfirebase.initializeApp(config);\r\n\r\nconst db = firebase.database();\r\n\r\nexport { db };","import React, { Component } from 'react';\nimport Header from '../Header/Header';\nimport AuthDialog from '../AuthDialog/AuthDialog';\nimport Footer from '..//Footer/Footer';\nimport ChatSpace from '../ChatSpace/ChatSpace';\nimport { connect } from 'react-redux';\nimport { logOut, logIn, updateMessagePool, inputValueChange } from '../../redux/actions';\nimport './App.css';\nimport {db} from '../../firebase';\n\nclass App extends Component {\n\n  componentDidMount() {\n    this.messagesRef = db.ref('messages');\n    this.messagesRef.on('value', (snapshot) => {this.props.updateMessagePool(Object.values(snapshot.val()))})\n  }\n\n  onInputChange = (value) => {\n      this.props.handleInputChange(value);\n  }\n\n  sendMessage = () => {\n      let text = this.props.inputValue;\n      if (text !== '') {\n          this.props.handleInputChange('');\n          let now = Date.now();\n          let message = {\n              id: now, \n              text,\n              name: this.props.userName\n          }\n          db.ref(`/messages/${now}`).set(message);\n      }\n  }\n\n  render() {\n    return (\n      <div className=\"App\">\n        <AuthDialog isOpened={!this.props.userName} inputValue={this.props.inputValue} onInputChange={this.onInputChange} onLogIn={this.props.handleLogIn}/>\n        <Header onLogOut={this.props.handleLogOut}>{this.props.userName}</Header>\n        <ChatSpace messages={this.props.messages} userName = {this.props.userName}/>\n        <Footer messages={this.props.messages} onSend={this.sendMessage} onInputChange={this.onInputChange} inputValue={this.props.inputValue} />\n      </div>\n    );\n  }\n}\n\nconst mapStateToProps = ({userName, messages, inputValue}) => ({\n  userName, messages, inputValue\n})\n\nconst mapDispatchToProps = (dispatch) => ({\n  handleLogOut() { dispatch(logOut())},\n  updateMessagePool(messages) {dispatch(updateMessagePool(messages))},\n  handleLogIn(userName) {dispatch(logIn(userName))},\n  handleInputChange(value) {dispatch(inputValueChange(value))}\n})\n\nexport default connect(mapStateToProps, mapDispatchToProps)(App);\n","import { createStore, applyMiddleware } from 'redux';\r\nimport reducer from './reducer';\r\n\r\nconst initialState = {\r\n    messages: [],\r\n    userName: 'Семён Брятов', \r\n    inputValue: ''\r\n}\r\n\r\nconst logger = store => next => action => {\r\n    console.log('dispatching', action)\r\n    let result = next(action)\r\n    console.log('next state', store.getState())\r\n    return result\r\n  }\r\n\r\nconst store = createStore(reducer, initialState, applyMiddleware(logger));\r\n\r\nexport default store;","import {INPUT_VALUE_CHANGE, LOG_OUT, LOG_IN, UPDATE_MESSAGE_POOL} from './actions';\r\n\r\nexport default function reducer(state, action) {\r\n    switch (action.type) {\r\n        case INPUT_VALUE_CHANGE:\r\n            return {...state, inputValue: action.value}\r\n        case LOG_OUT:\r\n            return {...state, userName: ''}\r\n        case LOG_IN:\r\n            return {...state, inputValue: '', userName: action.userName}      \r\n        case UPDATE_MESSAGE_POOL:\r\n            return {...state, messages: action.messages}    \r\n        default:\r\n            return state;\r\n    }\r\n}\r\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport 'normalize.css'\nimport './index.css';\nimport App from './components/App/App';\nimport { Provider } from 'react-redux'\nimport store from './redux/store';\n\nReactDOM.render(<Provider store={store}><App /></Provider>, document.getElementById('root'));\n\n"],"sourceRoot":""}