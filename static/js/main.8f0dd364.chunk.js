(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{24:function(e,a,t){e.exports=t(63)},31:function(e,a,t){},33:function(e,a,t){},35:function(e,a,t){},37:function(e,a,t){},39:function(e,a,t){},41:function(e,a,t){},47:function(e,a,t){},63:function(e,a,t){"use strict";t.r(a);var n=t(1),s=t.n(n),r=t(21),o=t.n(r),c=(t(29),t(31),t(3)),u=t(4),i=t(6),l=t(5),p=t(7),m=(t(33),function(e){var a=e.children,t=e.onLogOut;return s.a.createElement("header",{className:"Header"},s.a.createElement("p",{className:"Header-userName"},a),s.a.createElement("div",{className:"Header-button",onClick:t},s.a.createElement("div",{className:"Header-button_text"},"\u0412\u044b\u0439\u0442\u0438"),s.a.createElement("i",{className:"fas fa-sign-out-alt"})))}),h=(t(35),function(e){function a(){var e,t;Object(c.a)(this,a);for(var n=arguments.length,s=new Array(n),r=0;r<n;r++)s[r]=arguments[r];return(t=Object(i.a)(this,(e=Object(l.a)(a)).call.apply(e,[this].concat(s)))).handleLogIn=function(){var e=t.props.inputValue;""!==e&&t.props.onLogIn(e)},t.handleInputChange=function(e){t.props.onInputChange(e.target.value)},t}return Object(p.a)(a,e),Object(u.a)(a,[{key:"render",value:function(){return this.props.isOpened?s.a.createElement("div",{className:"AuthDialog"},s.a.createElement("div",{className:"AuthDialog-form"},s.a.createElement("h2",null,"\u0427\u0430\u0442\u0438\u043a"),s.a.createElement("input",{className:"AuthDialog-input",placeholder:"\u041b\u043e\u0433\u0438\u043d",onChange:this.handleInputChange,value:this.props.inputValue}),s.a.createElement("button",{onClick:this.handleLogIn,className:"AuthDialog-button"},"\u0412\u043e\u0439\u0442\u0438"))):null}}]),a}(s.a.Component)),g=(t(37),function(e){function a(){var e,t;Object(c.a)(this,a);for(var n=arguments.length,s=new Array(n),r=0;r<n;r++)s[r]=arguments[r];return(t=Object(i.a)(this,(e=Object(l.a)(a)).call.apply(e,[this].concat(s)))).handleInputChange=function(e){t.props.onInputChange(e.target.value)},t.keyListener=function(e){13===e.keyCode&&e.ctrlKey&&t.props.onSend()},t}return Object(p.a)(a,e),Object(u.a)(a,[{key:"render",value:function(){return s.a.createElement("footer",{className:"Footer","data-grid":"va-stretch"},s.a.createElement("div",{className:"Footer-textarea-container"},s.a.createElement("textarea",{className:"Footer-textarea",placeholder:"Ctrl+Enter \u0434\u043b\u044f \u043e\u0442\u043f\u0440\u0430\u0432\u043a\u0438",onKeyDown:this.keyListener,onChange:this.handleInputChange,value:this.props.inputValue})),s.a.createElement("div",{className:"Footer-gap"}),s.a.createElement("div",{className:"Footer-button",onClick:this.props.onSend},s.a.createElement("i",{className:"Footer-button-icon far fa-paper-plane"})))}}]),a}(s.a.Component)),d=(t(39),function(e){var a=e.hide,t=e.children;return a?null:t}),f=t(15),v=t.n(f),b=function(e){var a=e.message,t=e.isOutgoing;return s.a.createElement("div",{className:v()("ChatMessage",{"justify-right":t})},s.a.createElement("div",{className:v()("ChatMessage-message-avatar",{"order-2":t})},s.a.createElement("i",{className:"ChatMessage-message-avatar__icon fas fa-user-circle"}),s.a.createElement(d,{hide:t},s.a.createElement("div",{className:"ChatMessage-message-avatar__username"},a.name))),s.a.createElement("div",{className:"ChatMessage-message-text"},a.text))},O=(t(41),function(e){function a(){var e,t;Object(c.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(t=Object(i.a)(this,(e=Object(l.a)(a)).call.apply(e,[this].concat(r)))).renderMessages=function(){return t.props.messages.map(function(e){return s.a.createElement(b,{isOutgoing:t.props.userName===e.name,message:e,key:e.id})})},t}return Object(p.a)(a,e),Object(u.a)(a,[{key:"componentDidMount",value:function(){this.scrollToBottom()}},{key:"componentDidUpdate",value:function(e){e.messages;this.scrollToBottom()}},{key:"scrollToBottom",value:function(){this.container.scrollTop=this.container.scrollHeight}},{key:"render",value:function(){var e=this;return s.a.createElement("div",{className:"ChatSpace"},s.a.createElement("div",{className:"ChatSpace-messages",ref:function(a){e.container=a}},this.renderMessages()))}}]),a}(s.a.Component)),N=t(12),E="INPUT_VALUE_CHANGE",C="LOG_OUT",y="LOG_IN",j="UPDATE_MESSAGE_POOL";t(47);var I=t(17),k=t.n(I);k.a.initializeApp({apiKey:"AIzaSyAqiGbBbiz9l0XKIQeTw1qlVonK8rmS3hU",authDomain:"altarixchat.firebaseapp.com",databaseURL:"https://altarixchat.firebaseio.com",projectId:"altarixchat",storageBucket:"altarixchat.appspot.com",messagingSenderId:"707928431356"});var L=k.a.database(),A=function(e){function a(){var e,t;Object(c.a)(this,a);for(var n=arguments.length,s=new Array(n),r=0;r<n;r++)s[r]=arguments[r];return(t=Object(i.a)(this,(e=Object(l.a)(a)).call.apply(e,[this].concat(s)))).onInputChange=function(e){t.props.handleInputChange(e)},t.sendMessage=function(){var e=t.props.inputValue;if(""!==e){t.props.handleInputChange("");var a=Date.now(),n={id:a,text:e,name:t.props.userName};L.ref("/messages/".concat(a)).set(n)}},t}return Object(p.a)(a,e),Object(u.a)(a,[{key:"componentDidMount",value:function(){var e=this;this.messagesRef=L.ref("messages"),this.messagesRef.on("value",function(a){e.props.updateMessagePool(Object.values(a.val()))})}},{key:"render",value:function(){return s.a.createElement("div",{className:"App"},s.a.createElement(h,{isOpened:!this.props.userName,inputValue:this.props.inputValue,onInputChange:this.onInputChange,onLogIn:this.props.handleLogIn}),s.a.createElement(m,{onLogOut:this.props.handleLogOut},this.props.userName),s.a.createElement(O,{messages:this.props.messages,userName:this.props.userName}),s.a.createElement(g,{messages:this.props.messages,onSend:this.sendMessage,onInputChange:this.onInputChange,inputValue:this.props.inputValue}))}}]),a}(n.Component),V=Object(N.b)(function(e){return{userName:e.userName,messages:e.messages,inputValue:e.inputValue}},function(e){return{handleLogOut:function(){e({type:C})},updateMessagePool:function(a){e(function(e){return{type:j,messages:e}}(a))},handleLogIn:function(a){e(function(e){return{type:y,userName:e}}(a))},handleInputChange:function(a){e(function(e){return{type:E,value:e}}(a))}}})(A),w=t(10),M=t(11);var x=Object(w.c)(function(e,a){switch(a.type){case E:return Object(M.a)({},e,{inputValue:a.value});case C:return Object(M.a)({},e,{userName:""});case y:return Object(M.a)({},e,{inputValue:"",userName:a.userName});case j:return Object(M.a)({},e,{messages:a.messages});default:return e}},{messages:[],userName:"\u0421\u0435\u043c\u0451\u043d \u0411\u0440\u044f\u0442\u043e\u0432",inputValue:""},Object(w.a)(function(e){return function(a){return function(t){console.log("dispatching",t);var n=a(t);return console.log("next state",e.getState()),n}}}));o.a.render(s.a.createElement(N.a,{store:x},s.a.createElement(V,null)),document.getElementById("root"))}},[[24,2,1]]]);
//# sourceMappingURL=main.8f0dd364.chunk.js.map